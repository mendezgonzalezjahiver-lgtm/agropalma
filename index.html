<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGROPALMA - Sistema de Desprendibles de Nómina</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="#">
                    <h1 class="brand-title">AGROPALMA</h1>
                    <span class="brand-subtitle">Sistema de Nómina</span>
                </a>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="welcome-section text-center mb-5">
                        <h2 class="welcome-title">Portal de Desprendibles Quincenales</h2>
                        <p class="welcome-subtitle">Gestione y descargue sus comprobantes de pago de manera rápida y segura</p>
                    </div>

                    <div class="row g-4">
                        <!-- Módulo Empresa -->
                        <div class="col-md-6">
                            <div class="module-card company-module">
                                <div class="card-header-custom">
                                    <div class="icon-wrapper">
                                        <svg class="module-icon" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 1 1 0 000 2H6a2 2 0 100 4h2a2 2 0 100-4h-.5a1 1 0 000-2H8a2 2 0 012-2h4a2 2 0 012 2v9a2 2 0 01-2 2H6a2 2 0 01-2-2V5z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h3>Administración</h3>
                                </div>
                                <div class="card-body-custom">
                                    <p>Suba los archivos Excel con los desprendibles de nómina quincenal</p>
                                    <div class="mb-3">
                                        <input type="password" class="form-control" id="adminPassword" placeholder="Ingrese clave de administrador" style="max-width: 200px; margin: 0 auto;">
                                    </div>
                                    <button class="btn btn-custom-primary" onclick="agropalma.verificarAccesoAdministracion()">
                                        Acceder Administración
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Módulo Empleados -->
                        <div class="col-md-6">
                            <div class="module-card employee-module">
                                <div class="card-header-custom">
                                    <div class="icon-wrapper">
                                        <svg class="module-icon" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h3>Empleados</h3>
                                </div>
                                <div class="card-body-custom">
                                    <p>Descargue su desprendible de nómina ingresando su número de cédula</p>
                                    <button class="btn btn-custom-secondary" onclick="agropalma.showEmployeeModule()">
                                        Acceder Empleados
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Módulo Empresa (Oculto por defecto) -->
                    <div id="companyModule" class="module-content" style="display: none;">
                        <div class="content-card">
                            <h3 class="module-title">Subir Desprendibles de Nómina</h3>
                            <form id="uploadForm" onsubmit="agropalma.procesarArchivo(event)">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label for="period" class="form-label">Período Quincenal</label>
                                        <select class="form-select" id="period" required>
                                            <option value="">Seleccione un período</option>
                                            <option value="Enero 2026 - Periodo 1">Enero 2026 - Periodo 1</option>
                                            <option value="Enero 2026 - Periodo 2">Enero 2026 - Periodo 2</option>
                                            <option value="Febrero 2026 - Periodo 1">Febrero 2026 - Periodo 1</option>
                                            <option value="Febrero 2026 - Periodo 2">Febrero 2026 - Periodo 2</option>
                                            <option value="Marzo 2026 - Periodo 1">Marzo 2026 - Periodo 1</option>
                                            <option value="Marzo 2026 - Periodo 2">Marzo 2026 - Periodo 2</option>
                                            <option value="Abril 2026 - Periodo 1">Abril 2026 - Periodo 1</option>
                                            <option value="Abril 2026 - Periodo 2">Abril 2026 - Periodo 2</option>
                                            <option value="Mayo 2026 - Periodo 1">Mayo 2026 - Periodo 1</option>
                                            <option value="Mayo 2026 - Periodo 2">Mayo 2026 - Periodo 2</option>
                                            <option value="Junio 2026 - Periodo 1">Junio 2026 - Periodo 1</option>
                                            <option value="Junio 2026 - Periodo 2">Junio 2026 - Periodo 2</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="cedula" class="form-label">Cédula del Empleado</label>
                                        <input type="text" class="form-control" id="cedula" placeholder="Ingrese cédula (opcional)" title="Deje en blanco para procesar todos los empleados">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="excelFile" class="form-label">Archivo Excel</label>
                                        <input type="file" class="form-control" id="excelFile" accept=".xlsx,.xls,.csv" required>
                                        <small class="form-text text-muted">Archivos permitidos: .xlsx, .xls, .csv</small>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-custom-primary">
                                            <svg class="btn-icon" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                                            </svg>
                                            Subir y Convertir a PDF
                                        </button>
                                    </div>
                                </div>
                            </form>
                            <div id="uploadProgress" class="progress-container" style="display: none;">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
                                </div>
                                <p class="progress-text mt-2">Procesando archivo...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Módulo Empleados (Oculto por defecto) -->
                    <div id="employeeModule" class="module-content" style="display: none;">
                        <div class="content-card">
                            <h3 class="module-title">Descargar Desprendible</h3>
                            <form id="downloadForm">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="documentId" class="form-label">Número de Cédula</label>
                                        <input type="text" class="form-control" id="documentId" placeholder="Ingrese su número de cédula" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="downloadPeriod" class="form-label">Período</label>
                                        <select class="form-select" id="downloadPeriod" required>
                                            <option value="">Seleccione un período</option>
                                            <option value="Enero 2026 - Periodo 1">Enero 2026 - Periodo 1</option>
                                            <option value="Enero 2026 - Periodo 2">Enero 2026 - Periodo 2</option>
                                            <option value="Febrero 2026 - Periodo 1">Febrero 2026 - Periodo 1</option>
                                            <option value="Febrero 2026 - Periodo 2">Febrero 2026 - Periodo 2</option>
                                            <option value="Marzo 2026 - Periodo 1">Marzo 2026 - Periodo 1</option>
                                            <option value="Marzo 2026 - Periodo 2">Marzo 2026 - Periodo 2</option>
                                            <option value="Abril 2026 - Periodo 1">Abril 2026 - Periodo 1</option>
                                            <option value="Abril 2026 - Periodo 2">Abril 2026 - Periodo 2</option>
                                            <option value="Mayo 2026 - Periodo 1">Mayo 2026 - Periodo 1</option>
                                            <option value="Mayo 2026 - Periodo 2">Mayo 2026 - Periodo 2</option>
                                            <option value="Junio 2026 - Periodo 1">Junio 2026 - Periodo 1</option>
                                            <option value="Junio 2026 - Periodo 2">Junio 2026 - Periodo 2</option>
                                        </select>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-custom-secondary">
                                            <svg class="btn-icon" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                            </svg>
                                            Descargar PDF
                                        </button>
                                    </div>
                                </div>
                            </form>
                            <div id="downloadResult" class="result-container" style="display: none;">
                                <!-- Resultados de búsqueda aquí -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="text-center">
                <p>&copy; 2026 AGROPALMA. Todos los derechos reservados.</p>
                <p class="footer-subtitle">Sistema de Gestión de Nómina Quincenal</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="debug-full.js"></script>
    <script src="agropalma-system.js"></script>
</body>
</html>